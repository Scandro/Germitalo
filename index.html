<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>1000 Parole Tedesche</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    
    body {
      background-color: #f3f4f6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    header {
      background: linear-gradient(to right, #3b82f6, #1e40af);
      color: white;
      text-align: center;
      padding: 2rem 0;
    }
    
    header h1 {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    main {
      max-width: 32rem;
      margin: 0 auto;
      padding: 1rem;
      flex-grow: 1;
    }
    
    footer {
      background: linear-gradient(to right, #3b82f6, #1e40af);
      color: white;
      text-align: center;
      padding: 1rem 0;
      margin-top: 2rem;
    }
    
    .container {
      background-color: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
    }
    
    .menu h2, .quiz h2 {
      font-size: 1.25rem;
      font-weight: bold;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .quiz-types {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }
    
    .quiz-type {
      background-color: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      padding: 1rem;
      cursor: pointer;
      transition: transform 0.2s;
    }
    
    .quiz-type:hover {
      transform: translateY(-1px);
    }
    
    .quiz-type h3 {
      color: #3b82f6;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }
    
    .quiz-type p {
      font-size: 0.875rem;
    }
    
    .progress-bar {
      height: 0.5rem;
      background-color: #e5e7eb;
      border-radius: 9999px;
      overflow: hidden;
      margin-bottom: 0.5rem;
    }
    
    .progress-bar-fill {
      height: 100%;
      background-color: #ef4444;
      transition: width 0.3s;
    }
    
    .status {
      font-size: 0.875rem;
      text-align: center;
      margin-bottom: 1.5rem;
    }
    
    .flashcard {
      background-color: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      width: 100%;
      height: 16rem;
      cursor: pointer;
      position: relative;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    
    .flashcard.flipped {
      transform: rotateY(180deg);
    }
    
    .flashcard-front, .flashcard-back {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      backface-visibility: hidden;
      border-radius: 0.5rem;
    }
    
    .flashcard-front {
      background-color: #3b82f6;
      color: white;
    }
    
    .flashcard-back {
      background-color: #fde047;
      transform: rotateY(180deg);
    }
    
    .word {
      font-size: 2.25rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }
    
    .hint {
      font-size: 0.875rem;
      opacity: 0.8;
    }
    
    .multiple-choice h3, .writing h3, .listening h3 {
      font-size: 1.25rem;
      margin-bottom: 1rem;
    }
    
    .options {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    @media (min-width: 768px) {
      .options {
        grid-template-columns: repeat(2, 1fr);
      }
    }
    
    .option {
      padding: 0.75rem;
      border-radius: 0.5rem;
      border: 2px solid #3b82f6;
      background-color: white;
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }
    
    .option:hover:not(.correct):not(.incorrect) {
      background-color: #3b82f6;
      color: white;
    }
    
    .option.correct {
      background-color: #22c55e;
      color: white;
      border-color: #22c55e;
    }
    
    .option.incorrect {
      background-color: #ef4444;
      color: white;
      border-color: #ef4444;
    }
    
    .writing input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid #3b82f6;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1rem;
    }
    
    .feedback {
      padding: 0.75rem;
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      color: white;
    }
    
    .feedback.correct {
      background-color: #22c55e;
    }
    
    .feedback.incorrect {
      background-color: #ef4444;
    }
    
    .btn {
      background-color: #3b82f6;
      color: white;
      padding: 0.5rem 1.5rem;
      border-radius: 0.375rem;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      border: none;
      font-size: 1rem;
    }
    
    .btn-back {
      color: #4b5563;
      text-decoration: underline;
      background: none;
      border: none;
      cursor: pointer;
      margin-top: 1.5rem;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }
    
    .actions {
      margin-top: 1.5rem;
      text-align: center;
    }
    
    .summary {
      text-align: center;
      padding: 2rem 0;
    }
    
    .summary h2 {
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1.5rem;
    }
    
    .percentage {
      font-size: 3rem;
      font-weight: bold;
      color: #3b82f6;
      margin-bottom: 1rem;
    }
    
    .summary p {
      margin-bottom: 2rem;
    }
    
    .play-button {
      width: 4rem;
      height: 4rem;
      border-radius: 9999px;
      background-color: #ef4444;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border: none;
      cursor: pointer;
    }
    
    .btn-group {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    
    .btn-secondary {
      background-color: #e5e7eb;
      color: #1f2937;
    }
    
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>1000 Parole Tedesche</h1>
    <p>Impara le parole tedesche più utilizzate</p>
  </header>
  
  <main>
    <!-- Menu View -->
    <div id="menu-view" class="container menu">
      <h2>Scegli un tipo di quiz</h2>
      <div class="quiz-types">
        <div class="quiz-type" data-quiz-type="flashcard">
          <h3>Flashcard</h3>
          <p>Tocca per vedere la traduzione</p>
        </div>
        <div class="quiz-type" data-quiz-type="multiple-choice">
          <h3>Scelta Multipla</h3>
          <p>Scegli la traduzione corretta</p>
        </div>
        <div class="quiz-type" data-quiz-type="writing">
          <h3>Scrittura</h3>
          <p>Scrivi la traduzione della parola</p>
        </div>
        <div class="quiz-type" data-quiz-type="listening">
          <h3>Ascolto</h3>
          <p>Ascolta la parola e indovina</p>
        </div>
      </div>
    </div>
    
    <!-- Quiz View -->
    <div id="quiz-view" class="container quiz hidden">
      <h2 id="quiz-title">Quiz</h2>
      
      <div class="progress-bar">
        <div id="progress-fill" class="progress-bar-fill" style="width: 0%;"></div>
      </div>
      
      <p id="status" class="status">Parola 1 di 10 - Punteggio: 0/0</p>
      
      <!-- Flashcard Quiz -->
      <div id="flashcard-quiz" class="hidden">
        <div id="flashcard" class="flashcard">
          <div class="flashcard-front">
            <div id="front-word" class="word">der</div>
            <div class="hint">Tocca per vedere la traduzione</div>
          </div>
          <div class="flashcard-back">
            <div id="back-word" class="word">il</div>
            <div class="hint">Tocca per tornare alla parola tedesca</div>
          </div>
        </div>
        <div class="actions">
          <button id="next-flashcard" class="btn">Prossima parola</button>
        </div>
      </div>
      
      <!-- Multiple Choice Quiz -->
      <div id="multiple-choice-quiz" class="multiple-choice hidden">
        <h3 id="mc-question">Qual è la traduzione di "der"?</h3>
        <div id="mc-options" class="options">
          <!-- Opzioni generate dinamicamente -->
        </div>
        <div class="actions">
          <button id="next-mc" class="btn hidden">Prossima parola</button>
        </div>
      </div>
      
      <!-- Writing Quiz -->
      <div id="writing-quiz" class="writing hidden">
        <h3 id="writing-question">Scrivi la traduzione tedesca di "il":</h3>
        <input type="text" id="writing-answer" placeholder="Scrivi qui la tua risposta...">
        <div id="writing-feedback" class="feedback hidden"></div>
        <div class="actions">
          <button id="check-answer" class="btn">Verifica</button>
          <button id="next-writing" class="btn hidden">Prossima parola</button>
        </div>
      </div>
      
      <!-- Listening Quiz -->
      <div id="listening-quiz" class="listening hidden">
        <button id="play-word" class="play-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </button>
        <h3>Qual è la traduzione della parola che hai ascoltato?</h3>
        <div id="listening-options" class="options">
          <!-- Opzioni generate dinamicamente -->
        </div>
        <div class="actions">
          <button id="next-listening" class="btn hidden">Prossima parola</button>
        </div>
      </div>
      
      <!-- Summary View -->
      <div id="summary-view" class="summary hidden">
        <h2>Riepilogo Quiz</h2>
        <div id="percentage" class="percentage">0%</div>
        <p id="result-text">Hai risposto correttamente a 0 domande su 0.</p>
        <div class="btn-group">
          <button id="continue-button" class="btn">Continua con nuove parole</button>
          <button id="menu-button" class="btn btn-secondary">Torna al menu</button>
        </div>
      </div>
      
      <button id="back-to-menu" class="btn-back">Torna alla selezione</button>
    </div>
  </main>
  
  <footer>
    <p>&copy; 2025 1000 Parole Tedesche</p>
  </footer>

  <script>
    // Dataset di parole
    const words = [
      { tedesco: 'der', italiano: 'il' },
      { tedesco: 'die', italiano: 'la' },
      { tedesco: 'und', italiano: 'e' },
      { tedesco: 'in', italiano: 'in' },
      { tedesco: 'zu', italiano: 'a' },
      { tedesco: 'nicht', italiano: 'non' },
      { tedesco: 'ist', italiano: 'è' },
      { tedesco: 'du', italiano: 'tu' },
      { tedesco: 'ich', italiano: 'io' },
      { tedesco: 'mit', italiano: 'con' }
    ];
    
    // Variabili di stato globali
    let quizType = null;
    let currentWord = null;
    let options = [];
    let score = 0;
    let total = 0;
    let progress = 0;
    let showNextButton = false;
    
    // Elementi del DOM
    const menuView = document.getElementById('menu-view');
    const quizView = document.getElementById('quiz-view');
    const quizTitle = document.getElementById('quiz-title');
    const progressFill = document.getElementById('progress-fill');
    const status = document.getElementById('status');
    const flashcardQuiz = document.getElementById('flashcard-quiz');
    const flashcard = document.getElementById('flashcard');
    const frontWord = document.getElementById('front-word');
    const backWord = document.getElementById('back-word');
    const nextFlashcard = document.getElementById('next-flashcard');
    const multipleChoiceQuiz = document.getElementById('multiple-choice-quiz');
    const mcQuestion = document.getElementById('mc-question');
    const mcOptions = document.getElementById('mc-options');
    const nextMc = document.getElementById('next-mc');
    const writingQuiz = document.getElementById('writing-quiz');
    const writingQuestion = document.getElementById('writing-question');
    const writingAnswer = document.getElementById('writing-answer');
    const writingFeedback = document.getElementById('writing-feedback');
    const checkAnswer = document.getElementById('check-answer');
    const nextWriting = document.getElementById('next-writing');
    const listeningQuiz = document.getElementById('listening-quiz');
    const playWord = document.getElementById('play-word');
    const listeningOptions = document.getElementById('listening-options');
    const nextListening = document.getElementById('next-listening');
    const summaryView = document.getElementById('summary-view');
    const percentage = document.getElementById('percentage');
    const resultText = document.getElementById('result-text');
    const continueButton = document.getElementById('continue-button');
    const menuButton = document.getElementById('menu-button');
    const backToMenu = document.getElementById('back-to-menu');
    const quizTypes = document.querySelectorAll('.quiz-type');
    
    // Funzioni utili
    function shuffleArray(array) {
      const newArray = [...array];
      for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
      }
      return newArray;
    }
    
    function generateOptions(word) {
      const options = [word.italiano];
      
      while (options.length < 4) {
        const randomIndex = Math.floor(Math.random() * words.length);
        const randomWord = words[randomIndex].italiano;
        
        if (!options.includes(randomWord)) {
          options.push(randomWord);
        }
      }
      
      return shuffleArray(options);
    }
    
    function updateProgress() {
      progressFill.style.width = `${(progress / 10) * 100}%`;
      status.textContent = `Parola ${progress + 1} di 10 - Punteggio: ${score}/${total}`;
    }
    
    function resetQuiz() {
      currentWord = words[0];
      options = generateOptions(currentWord);
      score = 0;
      total = 0;
      progress = 0;
      showNextButton = false;
      
      // Aggiorna UI
      updateProgress();
      flashcard.classList.remove('flipped');
      frontWord.textContent = currentWord.tedesco;
      backWord.textContent = currentWord.italiano;
      mcQuestion.textContent = `Qual è la traduzione di "${currentWord.tedesco}"?`;
      renderMultipleChoiceOptions();
      writingQuestion.textContent = `Scrivi la traduzione tedesca di "${currentWord.italiano}":`;
      writingAnswer.value = '';
      writingAnswer.disabled = false;
      writingFeedback.classList.add('hidden');
      checkAnswer.classList.remove('hidden');
      nextMc.classList.add('hidden');
      nextWriting.classList.add('hidden');
      nextListening.classList.add('hidden');
      
      // Nascondi summary e mostra quiz appropriato
      summaryView.classList.add('hidden');
      flashcardQuiz.classList.add('hidden');
      multipleChoiceQuiz.classList.add('hidden');
      writingQuiz.classList.add('hidden');
      listeningQuiz.classList.add('hidden');
      
      // Mostra il quiz corretto
      if (quizType === 'flashcard') {
        flashcardQuiz.classList.remove('hidden');
        quizTitle.textContent = 'Quiz Flashcard';
      } else if (quizType === 'multiple-choice') {
        multipleChoiceQuiz.classList.remove('hidden');
        quizTitle.textContent = 'Quiz a Scelta Multipla';
      } else if (quizType === 'writing') {
        writingQuiz.classList.remove('hidden');
        quizTitle.textContent = 'Quiz di Scrittura';
      } else if (quizType === 'listening') {
        listeningQuiz.classList.remove('hidden');
        quizTitle.textContent = 'Quiz di Ascolto';
        renderListeningOptions();
      }
    }
    
    function nextWord() {
      progress++;
      
      if (progress >= 10) {
        showSummary();
        return;
      }
      
      currentWord = words[progress % words.length];
      options = generateOptions(currentWord);
      showNextButton = false;
      
      // Aggiorna UI
      updateProgress();
      flashcard.classList.remove('flipped');
      frontWord.textContent = currentWord.tedesco;
      backWord.textContent = currentWord.italiano;
      mcQuestion.textContent = `Qual è la traduzione di "${currentWord.tedesco}"?`;
      renderMultipleChoiceOptions();
      writingQuestion.textContent = `Scrivi la traduzione tedesca di "${currentWord.italiano}":`;
      writingAnswer.value = '';
      writingAnswer.disabled = false;
      writingFeedback.classList.add('hidden');
      checkAnswer.classList.remove('hidden');
      nextMc.classList.add('hidden');
      nextWriting.classList.add('hidden');
      nextListening.classList.add('hidden');
    }
    
    function renderMultipleChoiceOptions() {
      mcOptions.innerHTML = '';
      options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'option';
        button.textContent = option;
        button.addEventListener('click', () => {
          if (!showNextButton) {
            handleOptionClick(option, button);
          }
        });
        mcOptions.appendChild(button);
      });
    }
    
    function renderListeningOptions() {
      listeningOptions.innerHTML = '';
      options.forEach(option => {
        const button = document.createElement('button');
        button.className = 'option';
        button.textContent = option;
        button.addEventListener('click', () => {
          if (!showNextButton) {
            handleOptionClick(option, button);
          }
        });
        listeningOptions.appendChild(button);
      });
    }
    
    function handleOptionClick(option, button) {
      const isCorrect = option === currentWord.italiano;
      total++;
      
      if (isCorrect) {
        score++;
        button.classList.add('correct');
      } else {
        button.classList.add('incorrect');
        // Evidenzia la risposta corretta
        const options = button.parentElement.querySelectorAll('.option');
        options.forEach(opt => {
          if (opt.textContent === currentWord.italiano) {
            opt.classList.add('correct');
          }
        });
      }
      
      showNextButton = true;
      updateProgress();
      
      if (quizType === 'multiple-choice') {
        nextMc.classList.remove('hidden');
      } else if (quizType === 'listening') {
        nextListening.classList.remove('hidden');
      }
    }
    
    function showSummary() {
      const percentageValue = Math.round((score / total) * 100) || 0;
      
      flashcardQuiz.classList.add('hidden');
      multipleChoiceQuiz.classList.add('hidden');
      writingQuiz.classList.add('hidden');
      listeningQuiz.classList.add('hidden');
      
      percentage.textContent = `${percentageValue}%`;
      resultText.textContent = `Hai risposto correttamente a ${score} domande su ${total}.`;
      
      summaryView.classList.remove('hidden');
    }
    
    function playWordSound() {
      // In una implementazione reale userebbe la sintesi vocale
      alert(`La parola tedesca è: ${currentWord.tedesco}`);
    }
    
    // Event Listeners
    quizTypes.forEach(type => {
      type.addEventListener('click', () => {
        quizType = type.dataset.quizType;
        menuView.classList.add('hidden');
        quizView.classList.remove('hidden');
        resetQuiz();
      });
    });
    
    flashcard.addEventListener('click', () => {
      flashcard.classList.toggle('flipped');
    });
    
    nextFlashcard.addEventListener('click', nextWord);
    nextMc.addEventListener('click', nextWord);
    nextWriting.addEventListener('click', nextWord);
    nextListening.addEventListener('click', nextWord);
    
    checkAnswer.addEventListener('click', () => {
      const userAnswer = writingAnswer.value.toLowerCase().trim();
      const correctAnswer = currentWord.tedesco.toLowerCase();
      const isCorrect = userAnswer === correctAnswer;
      
      total++;
      
      if (isCorrect) {
        score++;
        writingFeedback.textContent = 'Corretto!';
        writingFeedback.className = 'feedback correct';
      } else {
        writingFeedback.textContent = `Errato. La risposta corretta è "${currentWord.tedesco}".`;
        writingFeedback.className = 'feedback incorrect';
      }
      
      writingFeedback.classList.remove('hidden');
      writingAnswer.disabled = true;
      checkAnswer.classList.add('hidden');
      nextWriting.classList.remove('hidden');
      showNextButton = true;
      updateProgress();
    });
    
    playWord.addEventListener('click', playWordSound);
    
    continueButton.addEventListener('click', resetQuiz);
    
    menuButton.addEventListener('click', () => {
      quizView.classList.add('hidden');
      menuView.classList.remove('hidden');
      quizType = null;
    });
    
    backToMenu.addEventListener('click', () => {
      quizView.classList.add('hidden');
      menuView.classList.remove('hidden');
      quizType = null;
    });
  </script>
</body>
</html>
